@page "/register"
@inject UserService UserService
@inject NavigationManager NavigationManager

<div class="register-container">
    <div class="register-box">
        <h3 class="register-title">Create Your Account</h3>
        <p class="register-subtitle">Join us and enjoy amazing features!</p>

        <div class="input-container">
            <label for="username">Username:</label>
            <input id="username" class="input-field" @bind="Username" placeholder="Enter your username" />
        </div>

        <div class="input-container">
            <label for="email">Email:</label>
            <input id="email" class="input-field" @bind="Email" type="email" placeholder="Enter your email" />
        </div>

        <div class="input-container">
            <label for="password">Password:</label>
            <input id="password" class="input-field" @bind="Password" type="password" placeholder="Enter your password" />
        </div>

        <button class="register-btn" @onclick="RegisterUser">Register</button>

        @if (Message != null)
        {
            <p class="message">@Message</p>
        }

        <div class="login-link">
            <p>Already have an account? <a href="/">Log in here</a></p>
        </div>
    </div>
</div>

@code {
    private string Username;
    private string Email;
    private string Password;
    private string Message;

    private async Task RegisterUser()
    {
        var success = await UserService.RegisterUser(Username, Email, Password);
        if (success)
        {
            Message = "Registration successful!";
            NavigationManager.NavigateTo("/");
        }
        else
        {
            Message = "Failed to register. Please try again.";
        }
    }
}